(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{64:function(n,e,t){"use strict";t.d(e,"b",(function(){return c})),t.d(e,"a",(function(){return i}));var r=t(67),o=t.n(r),a=t(33);function c(n){return o()({url:"".concat(a.a,"/login"),method:"POST",data:n})}function i(n){return o()({url:"".concat(a.a,"/messages"),method:"GET",params:n})}},65:function(n,e,t){"use strict";function r(n){return!!n.trim().length}t.d(e,"a",(function(){return r}))},66:function(n,e,t){"use strict";var r,o=t(24),a=t(60),c=t(63),i=(t(0),t(25)),s=t(4);var l=i.a.div(r||(r=Object(o.a)(["\n  max-width: 800px;\n  //padding: 0px 8px;\n  margin-right: auto;\n  margin-left: auto;\n"])));e.a=function(n){var e=n.children,t=Object(c.a)(n,["children"]);return Object(s.jsx)(l,Object(a.a)(Object(a.a)({},t),{},{children:e}))}},94:function(n,e,t){"use strict";t.r(e);var r=t(29),o=t.n(r),a=t(30);var c=t(20);function i(n){return function(n){if(Array.isArray(n))return Object(a.a)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||Object(c.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s,l,u,b=t(35),d=t(16),f=t(0),p=t(1),j=t(24),x=t(25),m=t(26),h=t(4);var O,g,v=x.a.span(s||(s=Object(j.a)(["\n  margin-left: 16px;\n"]))),w=x.a.div(l||(l=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  width: 100%;\n  align-items: flex-start;\n"]))),y=x.a.span(u||(u=Object(j.a)(["\n  height: auto;\n  background-color: ",";\n  color: ",";\n  padding: 16px;\n  position: relative;\n  margin-bottom: 16px;\n  margin-left: 16px;\n  max-width: 60%;\n  border-radius: 8px 8px 8px 0px;\n  border: 1px solid ",';\n\n  ::before {\n    content: " ";\n    position: absolute;\n    left: -1px;\n    bottom: -15px;\n    border-top: 15px solid ',';\n    border-right: 15px solid transparent;\n    border-bottom: none;\n  }\n\n  ::after {\n    content: " ";\n    position: absolute;\n    left: 0px;\n    bottom: -13px;\n    border-top: 15px solid ',";\n    border-right: 15px solid transparent;\n    border-bottom: none;\n  }\n"])),m.b,m.a,m.c,m.c,m.b),k=function(n){var e=n.username,t=n.children;return Object(h.jsxs)(w,{children:[Object(h.jsx)(v,{children:e}),Object(h.jsx)(y,{children:t})]})},I=t(60),S=t(63);var L=x.a.div(O||(O=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n  width: 100%;\n"]))),E=x.a.span(g||(g=Object(j.a)(["\n  height: auto;\n  background-color: ",';\n  color: #fff;\n  padding: 16px;\n  position: relative;\n  margin-right: 16px;\n  margin-bottom: 16px;\n  max-width: 60%;\n  border-radius: 8px 8px 0px 8px;\n\n  ::after {\n    content: " ";\n    position: absolute;\n    right: 0px;\n    bottom: -15px;\n    border-top: 15px solid ',";\n    border-left: 15px solid transparent;\n    border-bottom: none;\n  }\n"])),m.f,m.f),M=function(n){var e=n.children,t=Object(S.a)(n,["children"]);return Object(h.jsx)(L,Object(I.a)(Object(I.a)({},t),{},{children:Object(h.jsx)(E,{children:e})}))};function C(){return(C=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function Z(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},a=Object.keys(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var V=f.createElement("path",{d:"M6 1L6.70711 0.292893C6.31658 -0.0976312 5.68342 -0.0976312 5.29289 0.292893L6 1ZM10.2929 6.70711C10.6834 7.09763 11.3166 7.09763 11.7071 6.70711C12.0976 6.31658 12.0976 5.68342 11.7071 5.29289L10.2929 6.70711ZM0.292893 5.29289C-0.0976312 5.68342 -0.0976312 6.31658 0.292893 6.70711C0.683417 7.09763 1.31658 7.09763 1.70711 6.70711L0.292893 5.29289ZM5 15C5 15.5523 5.44772 16 6 16C6.55228 16 7 15.5523 7 15H5ZM5.29289 1.70711L10.2929 6.70711L11.7071 5.29289L6.70711 0.292893L5.29289 1.70711ZM5.29289 0.292893L0.292893 5.29289L1.70711 6.70711L6.70711 1.70711L5.29289 0.292893ZM5 1V8H7V1H5ZM5 8V15H7V8H5Z",fill:"white"});function H(n,e){var t=n.title,r=n.titleId,o=Z(n,["title","titleId"]);return f.createElement("svg",C({width:12,height:16,viewBox:"0 0 12 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":r},o),t?f.createElement("title",{id:r},t):null,V)}var P,T,z,A=f.forwardRef(H);t.p;var R,J,B,D,G,q,F,K=x.a.form(P||(P=Object(j.a)(["\n  border: 1px solid ",";\n  border-radius: 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 8px 16px;\n  background-color: ",";\n"])),m.c,m.g),N=x.a.input(T||(T=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  margin: 16px;\n  border: none;\n  font-size: 16px;\n  color: ",";\n\n  ::placeholder {\n    color: ",";\n  }\n\n  :focus {\n    outline: none;\n  }\n"])),m.e,m.d),Q=x.a.button(z||(z=Object(j.a)(["\n  width: 35px;\n  height: 35px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  border: none;\n  margin: 8px;\n  background-color: ",";\n  color: ",";\n  font-weight: bold;\n\n  :focus {\n    outline: 0;\n  }\n"])),m.f,m.g),U=function(n){var e=n.onSendMessage,t=Object(f.useState)(""),r=Object(d.a)(t,2),o=r[0],a=r[1];return Object(h.jsxs)(K,{onSubmit:function(n){n.preventDefault(),e(o),a("")},children:[Object(h.jsx)(N,{placeholder:"Message here...",value:o,onChange:function(n){return a(n.target.value)}}),Object(h.jsx)(Q,{children:Object(h.jsx)(A,{})})]})},W=t(34),X=t(64),Y=t(65),$=t(66),_=Object(x.a)($.a)(R||(R=Object(j.a)(["\n  position: fixed;\n  z-index: 9;\n  top: 0;\n  box-shadow: 0px 2px 5px 0px ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  padding: 8px 0;\n  background-color: ",";\n"])),m.c,m.g),nn=Object(x.a)($.a)(J||(J=Object(j.a)(["\n  position: fixed;\n  z-index: 9;\n  bottom: 0;\n  width: 100%;\n"]))),en=x.a.div(B||(B=Object(j.a)(["\n  height: calc(100vh - 157px);\n  margin-top: 55px;\n  margin-bottom: 70px;\n  overflow-y: scroll;\n  padding: 16px 0;\n  width: 100%;\n\n  ::-webkit-scrollbar-track {\n    background-color: #f5f5f5;\n  }\n\n  ::-webkit-scrollbar {\n    width: 5px;\n    background-color: #f5f5f5;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background-color: ",";\n  }\n"])),m.c),tn=Object(x.a)($.a)(D||(D=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),rn=x.a.div(G||(G=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  font-size: 32px;\n  font-weight: bold;\n  text-align: center;\n"]))),on=x.a.a(q||(q=Object(j.a)(["\n  margin-left: 16px;\n"]))),an=x.a.div(F||(F=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 16px;\n"])));e.default=function(n){var e=n.socket,t=Object(f.useState)(!1),r=Object(d.a)(t,2),a=r[0],c=r[1],s=Object(f.useState)(!1),l=Object(d.a)(s,2),u=l[0],j=l[1],x=Object(f.useState)([]),m=Object(d.a)(x,2),O=m[0],g=m[1],v=Object(f.useState)([]),w=Object(d.a)(v,2),y=w[0],I=w[1],S=Object(f.useState)(0),L=Object(d.a)(S,2),E=L[0],C=L[1],Z=Object(p.e)(),V=Object(p.f)(),H=Object(f.useRef)(null),P=Object(f.useRef)(null),T=Object(f.useMemo)((function(){return y.concat(O)}),[y,O]);Object(f.useEffect)((function(){Z.state?(e.emit("join-room",{roomId:Z.state.roomId,username:Z.state.username}),e.on("message",(function(n){Z.state.username!==n.username&&g((function(e){return e.concat(n)}))}))):V("/")}),[Z,Z.state]),Object(f.useEffect)((function(){var n,e;(null===(n=Z.state)||void 0===n?void 0:n.username)&&(null===(e=Z.state)||void 0===e?void 0:e.roomId)&&(c(!0),E&&j(!0),Object(X.a)({roomId:Z.state.roomId,skip:O.length+5*E}).then(function(){var n=Object(b.a)(o.a.mark((function n(e){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!1),j(!1),n.next=4,I((function(n){return[].concat(i(e.data.data),i(n))}));case 4:E&&(P.current.scrollTop=10);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){return c(!1)})))}),[E]),Object(f.useEffect)((function(){var n;y.length<15&&(null===(n=H.current)||void 0===n||n.scrollIntoView({behavior:"smooth"}))}),[y,E]),Object(f.useEffect)((function(){var n;null===(n=P.current)||void 0===n||n.addEventListener("scroll",(function(){0===P.current.scrollTop&&C((function(n){return n+1}))}),!1)}),[]);var z=Object(f.useCallback)((function(){e.emit("leave",{roomId:Z.state.roomId}),V("/")}),[]),A=function(){var n=Object(b.a)(o.a.mark((function n(t){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Object(Y.a)(t)){n.next=4;break}alert("Please enter a message"),n.next=8;break;case 4:return e.emit("message",t),n.next=7,g((function(n){return[].concat(i(n),[{username:Z.state.username,message:t}])}));case 7:null===(r=H.current)||void 0===r||r.scrollIntoView({behavior:"smooth"});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Z.state?Object(h.jsxs)(tn,{children:[Object(h.jsx)(W.b,{visible:a&&!E}),Object(h.jsxs)(_,{children:[Object(h.jsx)(on,{href:"#",title:"",onClick:z,children:"Exit"}),Object(h.jsx)(rn,{children:Z.state.roomId})]}),Object(h.jsxs)(en,{ref:P,children:[u&&Object(h.jsx)(an,{children:Object(h.jsx)(W.a,{style:{width:30,height:30}})}),T.map((function(n,e){return Z.state.username===n.username?Object(h.jsx)(M,{ref:H,children:n.message},e):Object(h.jsx)(k,{username:n.username,children:n.message},e)})),Object(h.jsx)("div",{ref:H})]}),Object(h.jsx)(nn,{children:Object(h.jsx)(U,{onSendMessage:A})})]}):Object(h.jsx)(W.b,{visible:!0})}}}]);
//# sourceMappingURL=4.993306b9.chunk.js.map