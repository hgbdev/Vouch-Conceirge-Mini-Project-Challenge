{"version":3,"sources":["services/request.js","utils/functions.js","components/Container.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/OtherMessage.js","components/MyMessage.js","assets/send.svg","components/FromSendMessage.js","screens/chatroom/styled.js","screens/chatroom/Component.js"],"names":["loginRequest","data","axios","url","END_POINT","method","getMessages","params","validateTextField","text","trim","length","ContainerBox","styled","div","Container","props","children","rest","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","Username","span","MessengeContainer","MessageBox","GRAY_1","BLACK","GRAY_2","OtherMessage","username","GREEN_PRIMARY","MyMessage","_extends","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","fill","SvgSend","_ref","svgRef","title","titleId","width","height","viewBox","xmlns","ref","id","ForwardRef","FormContainer","form","WHITE","InputMessage","input","GRAY_INPUT_TEXT","GRAY_3","ButtonMessage","button","FormSendMessage","onSendMessage","useState","setText","onSubmit","event","preventDefault","placeholder","value","onChange","e","HeaderArea","InputArea","ContentArea","ContainerChatroom","TitleChatroom","ExitLink","a","LoadMoreBox","ChatroomComponent","socket","loading","setLoading","spinnerLoadmore","setSpinnerLoadmore","currentMessages","setCurrentMessages","savedMessages","setSavedMessages","loadmore","setLoadmore","location","useLocation","navigate","useNavigate","refLastMessage","useRef","refContentArea","totalMessages","useMemo","concat","useEffect","state","emit","roomId","on","prev","skip","then","res","current","scrollTop","catch","err","scrollIntoView","behavior","addEventListener","handleLeaveRoom","useCallback","handleSendMessage","message","alert","Loading","visible","href","onClick","style","map","msg","index"],"mappings":"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","file":"static/js/4.993306b9.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { END_POINT } from \"constants/variables\";\r\n\r\nexport function loginRequest(data) {\r\n  return axios({\r\n    url: `${END_POINT}/login`,\r\n    method: \"POST\",\r\n    data,\r\n  });\r\n}\r\n\r\nexport function getMessages(data) {\r\n  return axios({\r\n    url: `${END_POINT}/messages`,\r\n    method: \"GET\",\r\n    params: data,\r\n  });\r\n}\r\n","/**\r\n * Validate field text, not empty\r\n * @param {*} text\r\n * @returns {Boolean}\r\n */\r\nexport function validateTextField(text) {\r\n  const newText = text.trim();\r\n  if (!newText.length) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\n/**\r\n * Container Component\r\n * @typedef PropTypes\r\n * @param {React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>} props\r\n * @returns\r\n */\r\nfunction Container(props) {\r\n  const { children, ...rest } = props;\r\n  return <ContainerBox {...rest}>{children}</ContainerBox>;\r\n}\r\n\r\nconst ContainerBox = styled.div`\r\n  max-width: 800px;\r\n  //padding: 0px 8px;\r\n  margin-right: auto;\r\n  margin-left: auto;\r\n`;\r\n\r\nexport default Container;\r\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { BLACK, GRAY_1, GRAY_2 } from \"constants/colors\";\r\n\r\n/**\r\n * OtherMessage Component\r\n * @typedef PropTypes\r\n * @property {string} username Username\r\n * @param {PropTypes} props\r\n * @returns {JSX.Element}\r\n */\r\nfunction OtherMessage(props) {\r\n  const { username, children } = props;\r\n  return (\r\n    <MessengeContainer>\r\n      <Username>{username}</Username>\r\n      <MessageBox>{children}</MessageBox>\r\n    </MessengeContainer>\r\n  );\r\n}\r\n\r\nconst Username = styled.span`\r\n  margin-left: 16px;\r\n`;\r\n\r\nconst MessengeContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 1;\r\n  width: 100%;\r\n  align-items: flex-start;\r\n`;\r\n\r\nconst MessageBox = styled.span`\r\n  height: auto;\r\n  background-color: ${GRAY_1};\r\n  color: ${BLACK};\r\n  padding: 16px;\r\n  position: relative;\r\n  margin-bottom: 16px;\r\n  margin-left: 16px;\r\n  max-width: 60%;\r\n  border-radius: 8px 8px 8px 0px;\r\n  border: 1px solid ${GRAY_2};\r\n\r\n  ::before {\r\n    content: \" \";\r\n    position: absolute;\r\n    left: -1px;\r\n    bottom: -15px;\r\n    border-top: 15px solid ${GRAY_2};\r\n    border-right: 15px solid transparent;\r\n    border-bottom: none;\r\n  }\r\n\r\n  ::after {\r\n    content: \" \";\r\n    position: absolute;\r\n    left: 0px;\r\n    bottom: -13px;\r\n    border-top: 15px solid ${GRAY_1};\r\n    border-right: 15px solid transparent;\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nexport default OtherMessage;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { GREEN_PRIMARY } from \"constants/colors\";\r\n\r\n/**\r\n * MyMessage Component\r\n * @param {*} props\r\n * @returns {JSX.Element}\r\n */\r\nfunction MyMessage(props) {\r\n  const { children, ...rest } = props;\r\n\r\n  return (\r\n    <MessengeContainer {...rest}>\r\n      <MessageBox>{children}</MessageBox>\r\n    </MessengeContainer>\r\n  );\r\n}\r\n\r\nconst MessengeContainer = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  justify-content: flex-end;\r\n  width: 100%;\r\n`;\r\n\r\nconst MessageBox = styled.span`\r\n  height: auto;\r\n  background-color: ${GREEN_PRIMARY};\r\n  color: #fff;\r\n  padding: 16px;\r\n  position: relative;\r\n  margin-right: 16px;\r\n  margin-bottom: 16px;\r\n  max-width: 60%;\r\n  border-radius: 8px 8px 0px 8px;\r\n\r\n  ::after {\r\n    content: \" \";\r\n    position: absolute;\r\n    right: 0px;\r\n    bottom: -15px;\r\n    border-top: 15px solid ${GREEN_PRIMARY};\r\n    border-left: 15px solid transparent;\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nexport default MyMessage;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 1L6.70711 0.292893C6.31658 -0.0976312 5.68342 -0.0976312 5.29289 0.292893L6 1ZM10.2929 6.70711C10.6834 7.09763 11.3166 7.09763 11.7071 6.70711C12.0976 6.31658 12.0976 5.68342 11.7071 5.29289L10.2929 6.70711ZM0.292893 5.29289C-0.0976312 5.68342 -0.0976312 6.31658 0.292893 6.70711C0.683417 7.09763 1.31658 7.09763 1.70711 6.70711L0.292893 5.29289ZM5 15C5 15.5523 5.44772 16 6 16C6.55228 16 7 15.5523 7 15H5ZM5.29289 1.70711L10.2929 6.70711L11.7071 5.29289L6.70711 0.292893L5.29289 1.70711ZM5.29289 0.292893L0.292893 5.29289L1.70711 6.70711L6.70711 1.70711L5.29289 0.292893ZM5 1V8H7V1H5ZM5 8V15H7V8H5Z\",\n  fill: \"white\"\n});\n\nfunction SvgSend(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 16,\n    viewBox: \"0 0 12 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSend);\nexport default __webpack_public_path__ + \"static/media/send.93cc5260.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  GRAY_2,\r\n  GRAY_3,\r\n  GRAY_INPUT_TEXT,\r\n  GREEN_PRIMARY,\r\n  WHITE,\r\n} from \"constants/colors\";\r\nimport { ReactComponent as IconSend } from \"assets/send.svg\";\r\n\r\n/**\r\n * @typedef PropTypes\r\n * @property {Function} onSendMessage\r\n * @param {PropTypes} props\r\n * @returns {JSX.Element}\r\n */\r\nfunction FormSendMessage(props) {\r\n  const { onSendMessage } = props;\r\n\r\n  const [text, setText] = useState(\"\");\r\n\r\n  const handeOnSendMessage = (event) => {\r\n    event.preventDefault();\r\n    onSendMessage(text);\r\n    setText(\"\");\r\n  };\r\n\r\n  return (\r\n    <FormContainer onSubmit={handeOnSendMessage}>\r\n      <InputMessage\r\n        placeholder=\"Message here...\"\r\n        value={text}\r\n        onChange={(e) => setText(e.target.value)}\r\n      />\r\n      <ButtonMessage>\r\n        <IconSend />\r\n      </ButtonMessage>\r\n    </FormContainer>\r\n  );\r\n}\r\n\r\nconst FormContainer = styled.form`\r\n  border: 1px solid ${GRAY_2};\r\n  border-radius: 100px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 8px 16px;\r\n  background-color: ${WHITE};\r\n`;\r\n\r\nconst InputMessage = styled.input`\r\n  display: flex;\r\n  flex: 1;\r\n  margin: 16px;\r\n  border: none;\r\n  font-size: 16px;\r\n  color: ${GRAY_INPUT_TEXT};\r\n\r\n  ::placeholder {\r\n    color: ${GRAY_3};\r\n  }\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst ButtonMessage = styled.button`\r\n  width: 35px;\r\n  height: 35px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 50%;\r\n  border: none;\r\n  margin: 8px;\r\n  background-color: ${GREEN_PRIMARY};\r\n  color: ${WHITE};\r\n  font-weight: bold;\r\n\r\n  :focus {\r\n    outline: 0;\r\n  }\r\n`;\r\n\r\nexport default FormSendMessage;\r\n","import Container from \"components/Container\";\r\nimport { GRAY_2, WHITE } from \"constants/colors\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const HeaderArea = styled(Container)`\r\n  position: fixed;\r\n  z-index: 9;\r\n  top: 0;\r\n  box-shadow: 0px 2px 5px 0px ${GRAY_2};\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 8px 0;\r\n  background-color: ${WHITE};\r\n`;\r\n\r\nexport const InputArea = styled(Container)`\r\n  position: fixed;\r\n  z-index: 9;\r\n  bottom: 0;\r\n  width: 100%;\r\n`;\r\n\r\nexport const ContentArea = styled.div`\r\n  height: calc(100vh - 157px);\r\n  margin-top: 55px;\r\n  margin-bottom: 70px;\r\n  overflow-y: scroll;\r\n  padding: 16px 0;\r\n  width: 100%;\r\n\r\n  ::-webkit-scrollbar-track {\r\n    background-color: #f5f5f5;\r\n  }\r\n\r\n  ::-webkit-scrollbar {\r\n    width: 5px;\r\n    background-color: #f5f5f5;\r\n  }\r\n\r\n  ::-webkit-scrollbar-thumb {\r\n    background-color: ${GRAY_2};\r\n  }\r\n`;\r\n\r\nexport const ContainerChatroom = styled(Container)`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`;\r\n\r\nexport const TitleChatroom = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: center;\r\n  font-size: 32px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n`;\r\n\r\nexport const ExitLink = styled.a`\r\n  margin-left: 16px;\r\n`;\r\n\r\nexport const LoadMoreBox = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n`;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, {\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport OtherMessage from \"components/OtherMessage\";\r\nimport MyMessage from \"components/MyMessage\";\r\nimport FormSendMessage from \"components/FromSendMessage\";\r\nimport Loading, { Spinner } from \"components/Loading\";\r\nimport { getMessages } from \"services/request\";\r\nimport { validateTextField } from \"utils/functions\";\r\nimport {\r\n  ContainerChatroom,\r\n  ContentArea,\r\n  ExitLink,\r\n  HeaderArea,\r\n  InputArea,\r\n  LoadMoreBox,\r\n  TitleChatroom,\r\n} from \"./styled\";\r\n\r\n/**\r\n * Chatroom Component\r\n * @typedef PropTypes\r\n * @property {*} socket Socket.io client\r\n * @param {PropTypes} props\r\n * @returns {JSX.Element}\r\n */\r\nfunction ChatroomComponent(props) {\r\n  const { socket } = props;\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [spinnerLoadmore, setSpinnerLoadmore] = useState(false);\r\n\r\n  const [currentMessages, setCurrentMessages] = useState([]);\r\n  const [savedMessages, setSavedMessages] = useState([]);\r\n  const [loadmore, setLoadmore] = useState(0);\r\n\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const refLastMessage = useRef(null);\r\n  const refContentArea = useRef(null);\r\n\r\n  const totalMessages = useMemo(\r\n    () => savedMessages.concat(currentMessages),\r\n    [savedMessages, currentMessages]\r\n  );\r\n\r\n  /**\r\n   * Join room when navigate to chat\r\n   */\r\n  useEffect(() => {\r\n    if (!location.state) navigate(\"/\");\r\n    else {\r\n      socket.emit(\"join-room\", {\r\n        roomId: location.state.roomId,\r\n        username: location.state.username,\r\n      });\r\n\r\n      socket.on(\"message\", (data) => {\r\n        if (location.state.username !== data.username)\r\n          setCurrentMessages((prev) => prev.concat(data));\r\n      });\r\n    }\r\n  }, [location, location.state]);\r\n\r\n  /**\r\n   * Get history messages\r\n   */\r\n  useEffect(() => {\r\n    if (location.state?.username && location.state?.roomId) {\r\n      setLoading(true);\r\n      if (loadmore) {\r\n        setSpinnerLoadmore(true);\r\n      }\r\n      getMessages({\r\n        roomId: location.state.roomId,\r\n        skip: currentMessages.length + loadmore * 5,\r\n      })\r\n        .then(async (res) => {\r\n          setLoading(false);\r\n          setSpinnerLoadmore(false);\r\n          await setSavedMessages((prev) => [...res.data.data, ...prev]);\r\n          if (loadmore) {\r\n            refContentArea.current.scrollTop = 10;\r\n          }\r\n        })\r\n        .catch((err) => setLoading(false));\r\n    }\r\n  }, [loadmore]);\r\n\r\n  /**\r\n   * Smooth scroll when first load message\r\n   */\r\n  useEffect(() => {\r\n    if (savedMessages.length < 15)\r\n      refLastMessage.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [savedMessages, loadmore]);\r\n\r\n  /**\r\n   * Infinity load more message\r\n   */\r\n  useEffect(() => {\r\n    refContentArea.current?.addEventListener(\r\n      \"scroll\",\r\n      () => {\r\n        if (refContentArea.current.scrollTop === 0)\r\n          setLoadmore((prev) => prev + 1);\r\n      },\r\n      false\r\n    );\r\n  }, []);\r\n\r\n  /**\r\n   * Handle leave room\r\n   */\r\n  const handleLeaveRoom = useCallback(() => {\r\n    socket.emit(\"leave\", { roomId: location.state.roomId });\r\n    navigate(\"/\");\r\n  }, []);\r\n\r\n  /**\r\n   * Handle send message\r\n   * @param {String} message\r\n   */\r\n  const handleSendMessage = async (message) => {\r\n    if (!validateTextField(message)) {\r\n      alert(\"Please enter a message\");\r\n    } else {\r\n      socket.emit(\"message\", message);\r\n      await setCurrentMessages((prev) => [\r\n        ...prev,\r\n        { username: location.state.username, message },\r\n      ]);\r\n      refLastMessage.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  };\r\n\r\n  if (!location.state) return <Loading visible={true} />;\r\n  return (\r\n    <ContainerChatroom>\r\n      <Loading visible={loading && !loadmore} />\r\n      <HeaderArea>\r\n        <ExitLink href=\"#\" title=\"\" onClick={handleLeaveRoom}>\r\n          Exit\r\n        </ExitLink>\r\n        <TitleChatroom>{location.state.roomId}</TitleChatroom>\r\n      </HeaderArea>\r\n\r\n      <ContentArea ref={refContentArea}>\r\n        {spinnerLoadmore && (\r\n          <LoadMoreBox>\r\n            <Spinner style={{ width: 30, height: 30 }} />\r\n          </LoadMoreBox>\r\n        )}\r\n        {totalMessages.map((msg, index) => {\r\n          return location.state.username === msg.username ? (\r\n            <MyMessage key={index} ref={refLastMessage}>\r\n              {msg.message}\r\n            </MyMessage>\r\n          ) : (\r\n            <OtherMessage key={index} username={msg.username}>\r\n              {msg.message}\r\n            </OtherMessage>\r\n          );\r\n        })}\r\n        <div ref={refLastMessage}></div>\r\n      </ContentArea>\r\n\r\n      <InputArea>\r\n        <FormSendMessage onSendMessage={handleSendMessage} />\r\n      </InputArea>\r\n    </ContainerChatroom>\r\n  );\r\n}\r\n\r\nexport default ChatroomComponent;\r\n"],"sourceRoot":""}